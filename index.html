
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1, maximum-scale=1" />
    <title>Employee Login</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet" />
    <script type="module" src="https://js.jam.dev/recorder.js"></script>
    <script type="module" src="https://js.jam.dev/capture.js"></script>
    <style>
      /* Light & Dark Mode Color Variables */
      :root {
        --bg-color: #222;
        --text-color: #ebebea;
        --input-bg: #333;
        --input-border: #555;
        --hover-color: #9D96F3;
        --separator-color: #555;
        --brand2-bg: #333;
        --pong-border: white;
        --button-primary-bg: white;
        --button-primary-text: #222;
        --button-primary-hover-bg: #f0f0f0;
        --form-bg: #2a2a2a;
      }

      body.light-mode {
        --bg-color: #f5f5f5;
        --text-color: #222;
        --input-bg: #fff;
        --input-border: #ccc;
        --hover-color: #5a4fd0;
        --separator-color: #ccc;
        --brand2-bg: #e0e0e0;
        --pong-border: #222;
        --button-primary-bg: #222;
        --button-primary-text: white;
        --button-primary-hover-bg: #333;
        --form-bg: #e9e9e9;
      }

      body {
        font-family: "JetBrains Mono", Helvetica, sans-serif;
        color: var(--text-color);
        background: var(--bg-color);
        margin: 0;
        overflow-x: hidden;
        overflow-y: auto;
        -webkit-font-smoothing: antialiased;
        transition: background-color 0.3s, color 0.3s;
      }
      a { color: inherit; text-decoration: none; }
      .page-container { position: relative; min-height: 100vh; width: 100vw; }
      
      /* Navbar Styles */
      .main-nav {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 24px 60px;
        box-sizing: border-box;
        z-index: 10;
      }
      .nav-left, .nav-right {
        display: flex;
        align-items: center;
        gap: 24px;
      }
      .separator {
        color: var(--separator-color);
        font-size: 24px;
        font-weight: 100;
      }
      .nav-links {
        display: flex;
        align-items: center;
        gap: 24px;
      }
      .logo {
        height: 36px;
        width: 36px;
        transition: filter 0.3s;
      }
      body.light-mode .logo {
        filter: invert(1);
      }
      .main-nav a {
        font-size: 16px;
        font-weight: 400;
        text-transform: capitalize;
        transition: color 0.3s ease;
      }
      .main-nav a:hover,
      .main-nav a.active-link {
        color: var(--hover-color);
      }
      .btn-primary {
        background-color: var(--button-primary-bg);
        color: var(--button-primary-text);
        padding: 8px 16px;
        border-radius: 6px;
        font-weight: 500;
        transition: background-color 0.3s, color 0.3s;
      }
      .btn-primary:hover {
        background-color: var(--button-primary-hover-bg);
        color: var(--hover-color) !important;
      }
      #theme-toggle {
        background: none;
        border: none;
        cursor: pointer;
        padding: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      #theme-toggle svg {
        width: 24px;
        height: 24px;
        color: var(--text-color);
        stroke: var(--text-color);
      }
      .moon-icon { display: none; }
      body.light-mode .sun-icon { display: none; }
      body.light-mode .moon-icon { display: block; }

      /* Centered Content Area */
      #content {
        display: flex;
        justify-content: center;
        align-items: center;
        text-align: center;
        padding: 120px 20px 40px;
      }

      /* Login & Admin Form Styles */
      .login-container, .admin-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        width: 100%;
      }
      .login-form {
        width: 100%;
        max-width: 300px;
        margin-top: 2em;
      }
      .form-group { margin-bottom: 1.5em; text-align: left;}
      .form-group label {
        display: block;
        margin-bottom: 0.5em;
      }
      .form-group input {
        width: 100%;
        padding: 0.5em;
        font-size: 14px;
        background-color: var(--input-bg);
        border: 1px solid var(--input-border);
        color: var(--text-color);
        box-sizing: border-box;
      }
      .login-button {
        width: 100%;
        padding: 12px 16px;
        background-color: var(--button-primary-bg);
        color: var(--button-primary-text);
        border: none;
        border-radius: 6px;
        font-weight: 500;
        font-size: 16px;
        font-family: "JetBrains Mono", Helvetica, sans-serif;
        cursor: pointer;
        transition: background-color 0.3s, color 0.3s;
      }
      .login-button:hover {
        background-color: var(--button-primary-hover-bg);
      }
      .forms-container {
        display: flex;
        gap: 40px;
        flex-wrap: wrap;
        justify-content: center;
        text-align: left;
      }
      .form-column {
        flex: 1;
        min-width: 320px;
        max-width: 400px;
      }
      .form-container {
        background-color: var(--form-bg);
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
        border: 1px solid var(--input-border);
      }
      .button-group {
        display: flex;
        gap: 10px;
      }
      .submit-btn, .clear-btn, .action-buttons button, .modal-btn {
        flex: 1;
        padding: 10px;
        border: 1px solid var(--input-border);
        border-radius: 4px;
        background-color: var(--input-bg);
        color: var(--text-color);
        cursor: pointer;
      }
      .submit-btn { background-color: #5a4fd0; color: #fff; border-color: #5a4fd0;}
      .action-buttons { display: flex; gap: 20px; margin-bottom: 20px;}
      .modal-buttons-container { display: flex; flex-direction: column; gap: 10px; }

      /* Modal Styles */
      .modal {
        display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%;
        background-color: rgba(0, 0, 0, 0.6);
      }
      .modal-content {
        background-color: var(--bg-color);
        margin: 15% auto; padding: 20px; border: 1px solid var(--input-border);
        width: 80%; max-width: 500px; border-radius: 8px;
      }
      .modal-header { padding-bottom: 10px; border-bottom: 1px solid var(--input-border); }
      .modal-body { padding-top: 20px; }
      .close { color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer; }

      /* Pong specific styles */
      #pongCanvas {
        background: var(--bg-color);
        border: 2px solid var(--pong-border);
      }

      /* Background color for Brand 02 page */
      .page-container.brand-2-background {
        background-color: var(--brand2-bg);
      }
    </style>
  </head>
  <body>
    <div class="page-container">
      
      <nav class="main-nav">
        <div class="nav-left">
          <img src="https://cdn.glitch.global/9d086b22-c6c8-44c2-b8cc-aabb00ea8a30/logo.png?v=1724728425599" alt="Logo" class="logo"/>
          <span class="separator">|</span>
          <div class="nav-links">
            <a class="link-home" href="#home">home</a>
            <a class="link-page1" href="#page1">page 01</a>
            <a class="link-page2" href="#page2">page 02</a>
            <a class="link-page3" href="#page3">page 03</a>
            <a class="link-brand02" href="#brand02">brand 02</a>
            <a class="link-help" href="" target="_blank">help</a>
          </div>
        </div>
        <div class="nav-right">
          <a class="link-admin" href="#admin">admin</a>
          <button id="theme-toggle" title="Toggle theme">
            <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
            <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
          </button>
          <a class="link-login btn-primary" href="#login">sign in</a>
          <a class="link-logout" href="#" onclick="logout()">logout</a>
        </div>
      </nav>
      
      <div id="content"></div>
    </div>

     <div id="trackEventModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close" onclick="closeModal('trackEventModal')">&times;</span>
                <h3>Track Events</h3>
            </div>
            <div class="modal-body">
                <form id="trackEventForm">
                    <div class="form-group"><label for="event_name">Event Name:</label><input type="text" id="event_name" required></div>
                    <div class="form-group"><label for="metadata_name">Metadata Name:</label><input type="text" id="metadata_name"></div>
                    <div class="form-group"><label for="metadata_value">Metadata Value:</label><input type="text" id="metadata_value"></div>
                    <div class="button-group">
                        <button type="submit" class="submit-btn">Submit</button>
                        <button type="button" class="clear-btn" onclick="clearTrackEventForm()">Clear</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div id="tourModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close" onclick="closeModal('tourModal')">&times;</span>
                <h3>Trigger Tour</h3>
            </div>
            <div class="modal-body">
                <form id="tourForm">
                    <div class="form-group"><label for="tour_id">Tour ID:</label><input type="number" id="tour_id" required></div>
                    <div class="button-group">
                        <button type="submit" class="submit-btn">Start Tour</button>
                        <button type="button" class="clear-btn" onclick="clearTourForm()">Clear</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
      const config = {
        intercomAppId: "bd8xo3jo",
        helpCenterUrl: "https://intercom.help/intercondiment01/en",
        validUsers: [
          { email: "your.email@example.com", name: "Your Name", password: "Password123" },
          { email: "fadim.tonde+user001@intercom.io", name: "Mayor Nays", password: "Password123" },
          { email: "fadim.tonde+user002@intercom.io", name: "Nat Ella", password: "Password123" },
        ]
      };
      
      let currentUserData = { user_id: null, email: null, name: null };
      let pongAnimationFrameId = null;
      let canvas, ctx;
      let player1 = { x: 10, y: 150, width: 10, height: 100, dy: 0, score: 0 };
      let player2 = { x: 580, y: 150, width: 10, height: 100, dy: 0, score: 0 };
      let ballImage = new Image();
      ballImage.src = 'https://logowik.com/content/uploads/images/intercom-new5332.logowik.com.webp';
      let ball = { x: 300, y: 200, width: 20, height: 20, dx: 5, dy: 5 };
      const paddleSpeed = 5;
      const pressedKeys = {};

      document.addEventListener("DOMContentLoaded", function () {
        applyTheme();
        document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
        document.querySelector(".link-help").href = config.helpCenterUrl;
        loadIntercomWidget(config.intercomAppId);
        updateLoginUI();
        loadPage();
        
        // Delegated event listener for all form submissions
        document.addEventListener("submit", function (event) {
          event.preventDefault();
          if (event.target.matches("#loginForm")) handleLogin();
          if (event.target.matches("#userDataForm")) handleBootUser(event);
          if (event.target.matches("#customAttributesForm")) handleUpdateAttributes(event);
          if (event.target.matches("#trackEventForm")) handleTrackEvent(event);
          if (event.target.matches("#tourForm")) handleStartTour(event);
        });
      });

      window.addEventListener("hashchange", () => loadPage());

      function loadPage(pageFromHash) {
        const page = pageFromHash || window.location.hash.slice(1) || "home";
        const content = document.getElementById("content");
        const links = document.querySelectorAll(".main-nav a");
        const pageContainer = document.querySelector(".page-container");
        links.forEach(link => link.classList.remove("active-link"));
        if (pongAnimationFrameId) {
          cancelAnimationFrame(pongAnimationFrameId);
          pongAnimationFrameId = null;
          document.removeEventListener('keydown', handlePongKeyDown);
          document.removeEventListener('keyup', handlePongKeyUp);
        }
        pageContainer.classList.remove('brand-2-background');
        content.innerHTML = '';
        const activeLink = document.querySelector(`.link-${page.split(' ')[0]}`);
        if (activeLink) activeLink.classList.add('active-link');
        
        switch (page) {
          case "home": case "page1": case "page2": break;
          case "page3":
            content.innerHTML = '<canvas id="pongCanvas" width="600" height="400"></canvas>';
            initializePong();
            break;
          case "brand02":
            pageContainer.classList.add('brand-2-background');
            break;
          case "login":
            content.innerHTML = `<div class="login-container"><form class="login-form" id="loginForm"><div class="form-group"><label for="username">Email</label><input type="email" id="username" required /></div><div class="form-group"><label for="password">Password</label><input type="password" id="password" required /></div><button type="submit" class="login-button">Sign In</button></form></div>`;
            break;
          case "admin":
            content.innerHTML = `<div class="admin-container"><h1>Admin Controls</h1><div class="forms-container"><div class="form-column"><div class="form-container"><p>Enter details to identify a user in Intercom.</p><form id="userDataForm"><div class="form-group"><label for="user_id">User ID:</label><input type="text" id="user_id"></div><div class="form-group"><label for="name">Name:</label><input type="text" id="name"></div><div class="form-group"><label for="email">Email:</label><input type="email" id="email"></div><div class="form-group"><label for="company_id">Company ID:</label><input type="text" id="company_id"></div><div class="form-group"><label for="company">Company Name:</label><input type="text" id="company"></div><div class="button-group"><button type="submit" class="submit-btn">Boot User</button><button type="button" class="clear-btn" onclick="clearBootForm()">Clear</button></div></form></div><div class="form-container"><h3>Add Custom Attributes</h3><form id="customAttributesForm"><div class="form-group"><label for="attribute_name">Attribute Name:</label><input type="text" id="attribute_name"></div><div class="form-group"><label for="attribute_value">Attribute Value:</label><input type="text" id="attribute_value"></div><div class="button-group"><button type="submit" class="submit-btn">Update User</button><button type="button" class="clear-btn" onclick="clearAttributesForm()">Clear</button></div></form></div></div><div class="form-column"><div class="action-buttons"><button type="button" onclick="performEmptyUpdate()">Empty Update</button><button type="button" onclick="performShutdown()">Shutdown</button></div><div class="modal-buttons-container form-container"><h3>Modals</h3><button type="button" class="modal-btn" onclick="openModal('trackEventModal')">Track Events</button><button type="button" class="modal-btn" onclick="openModal('tourModal')">Trigger Tour</button></div></div></div></div>`;
            break;
        }
      }

      // --- Admin Page & Modal Functions ---
      function clearBootForm() { document.getElementById("userDataForm").reset(); }
      function clearAttributesForm() { document.getElementById("customAttributesForm").reset(); }
      function clearTrackEventForm() { document.getElementById("trackEventForm").reset(); }
      function clearTourForm() { document.getElementById("tourForm").reset(); }
      function openModal(modalId) { document.getElementById(modalId).style.display = "block"; }
      function closeModal(modalId) { document.getElementById(modalId).style.display = "none"; }
      window.onclick = function (event) { if (event.target.classList.contains("modal")) { event.target.style.display = "none"; } };
      
      function performEmptyUpdate() { Intercom("update"); }
      function performShutdown() {
          Intercom("shutdown");
          currentUserData = { user_id: null, email: null, name: null };
      }
      function handleBootUser() {
          const bootData = { app_id: config.intercomAppId };
          const userId = document.getElementById("user_id").value;
          const name = document.getElementById("name").value;
          const email = document.getElementById("email").value;
          const companyId = document.getElementById("company_id").value;
          const companyName = document.getElementById("company").value;

          if (userId) bootData.user_id = userId;
          if (name) bootData.name = name;
          if (email) bootData.email = email;
          if (companyId || companyName) {
              bootData.company = {};
              if (companyId) bootData.company.id = companyId;
              if (companyName) bootData.company.name = companyName;
          }
          currentUserData = { user_id: userId || null, email: email || null, name: name || null };
          Intercom("boot", bootData);
      }
      function handleUpdateAttributes() {
          const attributeName = document.getElementById("attribute_name").value;
          const attributeValue = document.getElementById("attribute_value").value;
          if (!attributeName || !attributeValue) { alert("Please fill in both fields."); return; }
          const customData = { [attributeName]: attributeValue };
          Intercom("update", customData);
          alert('Custom attribute updated!');
          clearAttributesForm();
      }
      function handleTrackEvent() {
        const eventName = document.getElementById("event_name").value;
        const metadataName = document.getElementById("metadata_name").value;
        const metadataValue = document.getElementById("metadata_value").value;
        if (!eventName.trim()) { alert("Event name is required"); return; }
        const metadata = (metadataName && metadataValue) ? { [metadataName]: metadataValue } : {};
        Intercom("trackEvent", eventName, metadata);
        alert(`${eventName} event submitted!`);
        clearTrackEventForm();
        closeModal('trackEventModal');
      }
      function handleStartTour() {
        const tourId = parseInt(document.getElementById("tour_id").value);
        if (tourId) {
            Intercom("startTour", tourId);
            clearTourForm();
            closeModal('tourModal');
        }
      }

      function applyTheme() {
        const savedTheme = localStorage.getItem('theme') || 'dark';
        if (savedTheme === 'light') { document.body.classList.add('light-mode'); } 
        else { document.body.classList.remove('light-mode'); }
      }
      function toggleTheme() {
        if (document.body.classList.contains('light-mode')) {
            document.body.classList.remove('light-mode');
            localStorage.setItem('theme', 'dark');
        } else {
            document.body.classList.add('light-mode');
            localStorage.setItem('theme', 'light');
        }
      }

      function handleLogin() {
        const username = document.getElementById("username").value;
        const password = document.getElementById("password").value;
        const user = config.validUsers.find((u) => u.email === username && u.password === password);
        if (user) {
          const userData = { app_id: config.intercomAppId, name: user.name, email: user.email, created_at: Math.floor(Date.now() / 1000) };
          localStorage.setItem("user", JSON.stringify(userData));
          if (window.Intercom) { window.Intercom("boot", userData); }
          alert("Login successful!");
          window.location.hash = "home";
          updateLoginUI();
        } else { alert("Invalid credentials."); }
      }

      function logout() {
        localStorage.removeItem("user");
        if (window.Intercom) { window.Intercom("shutdown"); window.Intercom("boot", { app_id: config.intercomAppId }); }
        alert("Logged out.");
        window.location.hash = "home";
        updateLoginUI();
      }

      function updateLoginUI() {
        const isLoggedIn = localStorage.getItem("user") !== null;
        const loginLink = document.querySelector(".link-login");
        const logoutLink = document.querySelector(".link-logout");
        if (loginLink && logoutLink) {
          loginLink.style.display = isLoggedIn ? "none" : "flex";
          logoutLink.style.display = isLoggedIn ? "inline-block" : "none";
        }
      }
      
      function initializePong() {
        canvas = document.getElementById('pongCanvas'); if (!canvas) return;
        ctx = canvas.getContext('2d'); resetBall();
        document.addEventListener('keydown', handlePongKeyDown);
        document.addEventListener('keyup', handlePongKeyUp); gameLoop();
      }
      function handlePongKeyDown(e) { pressedKeys[e.key] = true; }
      function handlePongKeyUp(e) { pressedKeys[e.key] = false; }
      function update() {
        if (pressedKeys['w']) player1.dy = -paddleSpeed; else if (pressedKeys['s']) player1.dy = paddleSpeed; else player1.dy = 0;
        player1.y += player1.dy;
        if (player1.y < 0) player1.y = 0; if (player1.y + player1.height > canvas.height) player1.y = canvas.height - player1.height;
        if (ball.dx > 0) { if (player2.y + player2.height / 2 < ball.y) { player2.y += paddleSpeed * 0.9; } else if (player2.y + player2.height / 2 > ball.y) { player2.y -= paddleSpeed * 0.9; } }
        if (player2.y < 0) player2.y = 0; if (player2.y + player2.height > canvas.height) player2.y = canvas.height - player2.height;
        ball.x += ball.dx; ball.y += ball.dy;
        if (ball.y + ball.height / 2 > canvas.height || ball.y - ball.height / 2 < 0) { ball.dy *= -1; }
        if (ball.dx < 0 && ball.x - ball.width / 2 < player1.x + player1.width && ball.y + ball.height / 2 > player1.y && ball.y - ball.height / 2 < player1.y + player1.height) { ball.dx *= -1; }
        if (ball.dx > 0 && ball.x + ball.width / 2 > player2.x && ball.y + ball.height / 2 > player2.y && ball.y - ball.height / 2 < player2.y + player2.height) { ball.dx *= -1; }
        if (ball.x - ball.width / 2 < 0) { player2.score++; resetBall(); } else if (ball.x + ball.width / 2 > canvas.width) { player1.score++; resetBall(); }
      }
      function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = getComputedStyle(document.body).getPropertyValue('--pong-border');
        ctx.fillRect(player1.x, player1.y, player1.width, player1.height);
        ctx.fillRect(player2.x, player2.y, player2.width, player2.height);
        ctx.drawImage(ballImage, ball.x - ball.width / 2, ball.y - ball.height / 2, ball.width, ball.height);
        ctx.font = '30px "JetBrains Mono"';
        ctx.fillText(player1.score, canvas.width / 4, 50); ctx.fillText(player2.score, canvas.width * 3 / 4, 50);
        ctx.beginPath(); ctx.setLineDash([10, 10]); ctx.moveTo(canvas.width / 2, 0); ctx.lineTo(canvas.width / 2, canvas.height);
        ctx.strokeStyle = getComputedStyle(document.body).getPropertyValue('--pong-border');
        ctx.stroke(); ctx.setLineDash([]);
      }
      function resetBall() {
        ball.x = canvas.width / 2; ball.y = canvas.height / 2; ball.dx = (Math.random() > 0.5 ? 1 : -1) * 5; ball.dy = (Math.random() > 0.5 ? 1 : -1) * 5;
      }
      function gameLoop() { update(); draw(); pongAnimationFrameId = requestAnimationFrame(gameLoop); }

      function loadIntercomWidget(appId) {
        var w = window; var ic = w.Intercom; if (typeof ic === "function") { ic("reattach_activator"); ic("update", w.intercomSettings); } else {
          var d = document; var i = function () { i.c(arguments); }; i.q = []; i.c = function (args) { i.q.push(args); }; w.Intercom = i;
          var l = function () {
            var s = d.createElement("script"); s.type = "text/javascript"; s.async = true; s.src = `https://widget.intercom.io/widget/${appId}`;
            var x = d.getElementsByTagName("script")[0]; x.parentNode.insertBefore(s, x);
            s.onload = function() {
              const userData = JSON.parse(localStorage.getItem("user"));
              if (userData) { window.Intercom("boot", userData); } else { window.Intercom("boot", { app_id: config.intercomAppId }); }
            };
          };
          if (document.readyState === "complete") { l(); } else if (w.attachEvent) { w.attachEvent("onload", l); } else { w.addEventListener("load", l, false); }
        }
      }
    </script>
  </body>
</html>
